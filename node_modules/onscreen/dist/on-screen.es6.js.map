{"version":3,"file":null,"sources":["../lib/helpers/observe-dom.js","../lib/methods/attach.js","../lib/helpers/in-viewport.js","../lib/helpers/in-container.js","../lib/helpers/scroll-handler.js","../lib/methods/debounced-scroll.js","../lib/methods/destroy.js","../lib/methods/off.js","../lib/methods/on.js","../lib/index.js"],"sourcesContent":["/**\n * Observes DOM mutations and runs a callback function when\n * detecting one.\n *\n * @param {node} obj The DOM node you want to observe\n * @param {function} callback The callback function you want to call\n * @return {MutationObserver} obs The mutation observer instance used to track DOM mutations\n */\nfunction observeDOM(obj, callback) {\n    const MutationObserver = window.MutationObserver || window.WebKitMutationObserver;\n\n    /* istanbul ignore else */\n    if (MutationObserver) {\n        const obs = new MutationObserver(callback);\n\n        obs.observe(obj, {\n            childList: true,\n            subtree: true\n        });\n\n        return obs;\n    }\n\n    obj.addEventListener('DOMNodeInserted', callback, false);\n    obj.addEventListener('DOMNodeRemoved', callback, false);\n\n    return null;\n}\n\nexport default observeDOM;\n","import observeDOM from '../helpers/observe-dom';\n\n/**\n * Attaches the scroll event handler\n *\n * @return {void}\n */\nfunction attach() {\n    const container = this.options.container;\n\n    if (container instanceof HTMLElement) {\n        const style = window.getComputedStyle(container);\n\n        if (style.position === 'static') {\n            container.style.position = 'relative';\n        }\n    }\n\n    this._observer = observeDOM(document.querySelector('body'), () => {\n        Object.keys(this.trackedElements).forEach((element) => {\n            this.on('enter', element);\n            this.on('leave', element);\n        });\n    });\n\n    container.addEventListener('scroll', this._scroll, { passive: true });\n    window.addEventListener('resize', this._scroll, { passive: true });\n    this._scroll();\n    this.attached = true;\n}\n\nexport default attach;\n","/**\n * Checks an element's position in respect to the viewport\n * and determines wether it's inside the viewport.\n *\n * @param {node} element The DOM node you want to check\n * @return {boolean} A boolean value that indicates wether is on or off the viewport.\n */\nfunction inViewport(el, options = { tolerance: 0 }) {\n    if (!el) {\n        throw new Error('You should specify the element you want to test');\n    }\n\n    if (typeof el === 'string') {\n        el = document.querySelector(el);\n    }\n\n    const elRect = el.getBoundingClientRect();\n\n    return (\n        // Check bottom boundary\n        elRect.bottom - options.tolerance > 0 &&\n\n        // Check right boundary\n        elRect.right - options.tolerance > 0 &&\n\n        // Check left boundary\n        elRect.left + options.tolerance < (window.innerWidth ||\n        document.documentElement.clientWidth) &&\n\n        // Check top boundary\n        elRect.top + options.tolerance < (window.innerHeight ||\n        document.documentElement.clientHeight)\n    );\n}\n\nexport default inViewport;\n","/**\n * Checks an element's position in respect to a HTMLElement\n * and determines wether it's within its boundaries.\n *\n * @param {node} element The DOM node you want to check\n * @return {boolean} A boolean value that indicates wether is on or off the container.\n */\nfunction inContainer(el, options = { tolerance: 0, container: '' }) {\n    if (!el) {\n        throw new Error('You should specify the element you want to test');\n    }\n\n    if (typeof el === 'string') {\n        el = document.querySelector(el);\n    }\n    if (typeof options === 'string') {\n        options = {\n            tolerance: 0,\n            container: document.querySelector(options)\n        };\n    }\n    if (typeof options.container === 'string') {\n        options.container = document.querySelector(options.container);\n    }\n    if (options instanceof HTMLElement) {\n        options = {\n            tolerance: 0,\n            container: options\n        };\n    }\n    if (!options.container) {\n        throw new Error('You should specify a container element');\n    }\n\n    const containerRect = options.container.getBoundingClientRect();\n\n    return (\n        // // Check bottom boundary\n        (el.offsetTop + el.clientHeight) - options.tolerance >\n        options.container.scrollTop &&\n\n        // Check right boundary\n        (el.offsetLeft + el.clientWidth) - options.tolerance >\n        options.container.scrollLeft &&\n\n        // Check left boundary\n        el.offsetLeft + options.tolerance <\n        containerRect.width + options.container.scrollLeft &&\n\n        // // Check top boundary\n        el.offsetTop + options.tolerance <\n        containerRect.height + options.container.scrollTop\n    );\n}\n\nexport default inContainer;\n","import inViewport from './in-viewport';\nimport inContainer from './in-container';\n\n// TODO: Refactor this so it can be easily tested\n/* istanbul ignore next */\nfunction eventHandler(trackedElements = {}, options = { tolerance: 0 }) {\n    const selectors = Object.keys(trackedElements);\n    let testVisibility;\n\n    if (!selectors.length) return;\n\n    if (options.container === window) {\n        testVisibility = inViewport;\n    } else {\n        testVisibility = inContainer;\n    }\n\n    selectors.forEach((selector) => {\n        trackedElements[selector].nodes.forEach((item) => {\n            if (testVisibility(item.node, options)) {\n                item.wasVisible = item.isVisible;\n                item.isVisible = true;\n            } else {\n                item.wasVisible = item.isVisible;\n                item.isVisible = false;\n            }\n            if (item.isVisible === true && item.wasVisible === false) {\n                if (!trackedElements[selector].enter) return;\n\n                Object.keys(trackedElements[selector].enter).forEach((callback) => {\n                    if (typeof trackedElements[selector].enter[callback] === 'function') {\n                        trackedElements[selector].enter[callback](item.node, 'enter');\n                    }\n                });\n            }\n            if (item.isVisible === false && item.wasVisible === true) {\n                if (!trackedElements[selector].leave) return;\n\n                Object.keys(trackedElements[selector].leave).forEach((callback) => {\n                    if (typeof trackedElements[selector].leave[callback] === 'function') {\n                        trackedElements[selector].leave[callback](item.node, 'leave');\n                    }\n                });\n            }\n        });\n    });\n}\n\nexport default eventHandler;\n","import scrollHandler from '../helpers/scroll-handler';\n\n/**\n * Debounces the scroll event to avoid performance issues\n *\n * @return {void}\n */\nfunction debouncedScroll() {\n    let timeout;\n\n    if (this.options.debounce === false) {\n        return () => scrollHandler(this.trackedElements, this.options);\n    }\n\n    return () => {\n        clearTimeout(timeout);\n\n        timeout = setTimeout(() => {\n            scrollHandler(this.trackedElements, this.options);\n        }, this.options.debounce);\n    };\n}\n\nexport default debouncedScroll;\n","/**\n * Removes the scroll event handler\n *\n * @return {void}\n */\nfunction destroy() {\n    if (this._observer instanceof MutationObserver) {\n        this._observer.disconnect();\n    }\n\n    this.options.container.removeEventListener('scroll', this._scroll);\n    window.removeEventListener('resize', this._scroll);\n    this.attached = false;\n}\n\nexport default destroy;\n","/**\n * Stops tracking elements matching a CSS selector. If a selector has no\n * callbacks it gets removed.\n *\n * @param {string} event The event you want to stop tracking (enter or leave)\n * @param {string} selector The CSS selector you want to stop tracking\n * @return {void}\n */\nfunction off(event, selector, handler) {\n    const enterCallbacks = Object.keys(this.trackedElements[selector].enter || {});\n    const leaveCallbacks = Object.keys(this.trackedElements[selector].leave || {});\n\n    if ({}.hasOwnProperty.call(this.trackedElements, selector)) {\n        if (handler) {\n            if (this.trackedElements[selector][event]) {\n                const callbackName = (typeof handler === 'function') ? handler.name : handler;\n                delete this.trackedElements[selector][event][callbackName];\n            }\n        } else {\n            delete this.trackedElements[selector][event];\n        }\n    }\n\n    if (!enterCallbacks.length && !leaveCallbacks.length) {\n        delete this.trackedElements[selector];\n    }\n}\n\nexport default off;\n","/**\n * Starts tracking elements matching a CSS selector\n *\n * @param {string} event The event you want to track (enter or leave)\n * @param {string} selector The element you want to track\n * @param {function} callback The callback function to handle the event\n * @return {void}\n */\nfunction on(event, selector, callback) {\n    const allowed = ['enter', 'leave'];\n\n    if (!event) throw new Error('No event given. Choose either enter or leave');\n    if (!selector) throw new Error('No selector to track');\n    if (allowed.indexOf(event) < 0) throw new Error(`${event} event is not supported`);\n\n    if (!{}.hasOwnProperty.call(this.trackedElements, selector)) {\n        this.trackedElements[selector] = {};\n    }\n\n    this.trackedElements[selector].nodes = [];\n\n    for (let i = 0, elems = document.querySelectorAll(selector); i < elems.length; i++) {\n        const item = {\n            isVisible: false,\n            wasVisible: false,\n            node: elems[i]\n        };\n\n        this.trackedElements[selector].nodes.push(item);\n    }\n\n    if (typeof callback === 'function') {\n        if (!this.trackedElements[selector][event]) {\n            this.trackedElements[selector][event] = {};\n        }\n\n        this.trackedElements[selector][event][(callback.name || 'anonymous')] = callback;\n    }\n}\n\nexport default on;\n","// Methods\nimport attach from './methods/attach';\nimport debouncedScroll from './methods/debounced-scroll';\nimport destroy from './methods/destroy';\nimport off from './methods/off';\nimport on from './methods/on';\n\n// Helpers\nimport inViewport from './helpers/in-viewport';\n\n/**\n * Detects wether DOM nodes enter or leave the viewport\n *\n * @constructor\n * @param {object} options The configuration object\n */\nfunction OnScreen(options = { tolerance: 0, debounce: 100, container: window }) {\n    this.options = {};\n    this.trackedElements = {};\n\n    Object.defineProperties(this.options, {\n        container: {\n            configurable: false,\n            enumerable: false,\n            get() {\n                let container;\n\n                if (typeof options.container === 'string') {\n                    container = document.querySelector(options.container);\n                } else if (options.container instanceof HTMLElement) {\n                    container = options.container;\n                }\n\n                return container || window;\n            },\n            set(value) {\n                options.container = value;\n            }\n        },\n        debounce: {\n            get() {\n                if (options.debounce === false) {\n                    return false;\n                }\n\n                return parseInt(options.debounce, 10) || 100;\n            },\n            set(value) {\n                options.debounce = value;\n            }\n        },\n        tolerance: {\n            get() {\n                return parseInt(options.tolerance, 10) || 0;\n            },\n            set(value) {\n                options.tolerance = value;\n            }\n        }\n    });\n\n    Object.defineProperty(this, '_scroll', {\n        enumerable: false,\n        configurable: false,\n        writable: false,\n        value: this._debouncedScroll.call(this)\n    });\n\n    this.attach();\n}\n\nObject.defineProperties(OnScreen.prototype, {\n    _debouncedScroll: {\n        configurable: false,\n        writable: false,\n        enumerable: false,\n        value: debouncedScroll\n    },\n    attach: {\n        configurable: false,\n        writable: false,\n        enumerable: false,\n        value: attach\n    },\n    destroy: {\n        configurable: false,\n        writable: false,\n        enumerable: false,\n        value: destroy\n    },\n    off: {\n        configurable: false,\n        writable: false,\n        enumerable: false,\n        value: off\n    },\n    on: {\n        configurable: false,\n        writable: false,\n        enumerable: false,\n        value: on\n    }\n});\n\nOnScreen.check = inViewport;\n\nexport default OnScreen;\n"],"names":["observeDOM","obj","callback","MutationObserver","window","WebKitMutationObserver","obs","observe","addEventListener","attach","container","options","HTMLElement","style","getComputedStyle","position","_observer","document","querySelector","keys","trackedElements","forEach","element","on","_scroll","passive","attached","inViewport","el","tolerance","Error","elRect","getBoundingClientRect","bottom","right","left","innerWidth","documentElement","clientWidth","top","innerHeight","clientHeight","inContainer","containerRect","offsetTop","scrollTop","offsetLeft","scrollLeft","width","height","eventHandler","selectors","Object","testVisibility","length","selector","nodes","item","node","wasVisible","isVisible","enter","leave","debouncedScroll","timeout","debounce","scrollHandler","setTimeout","destroy","disconnect","removeEventListener","off","event","handler","enterCallbacks","leaveCallbacks","hasOwnProperty","call","callbackName","name","allowed","indexOf","i","elems","querySelectorAll","push","OnScreen","defineProperties","value","parseInt","defineProperty","_debouncedScroll","prototype","check"],"mappings":"AAAA;;;;;;;;AAQA,SAASA,UAAT,CAAoBC,GAApB,EAAyBC,QAAzB,EAAmC;QACzBC,mBAAmBC,OAAOD,gBAAP,IAA2BC,OAAOC,sBAA3D;;;QAGIF,gBAAJ,EAAsB;YACZG,MAAM,IAAIH,gBAAJ,CAAqBD,QAArB,CAAZ;;YAEIK,OAAJ,CAAYN,GAAZ,EAAiB;uBACF,IADE;qBAEJ;SAFb;;eAKOK,GAAP;;;QAGAE,gBAAJ,CAAqB,iBAArB,EAAwCN,QAAxC,EAAkD,KAAlD;QACIM,gBAAJ,CAAqB,gBAArB,EAAuCN,QAAvC,EAAiD,KAAjD;;WAEO,IAAP;CAGJ;;AC3BA;;;;;AAKA,SAASO,MAAT,GAAkB;;;QACRC,YAAY,KAAKC,OAAL,CAAaD,SAA/B;;QAEIA,qBAAqBE,WAAzB,EAAsC;YAC5BC,QAAQT,OAAOU,gBAAP,CAAwBJ,SAAxB,CAAd;;YAEIG,MAAME,QAAN,KAAmB,QAAvB,EAAiC;sBACnBF,KAAV,CAAgBE,QAAhB,GAA2B,UAA3B;;;;SAIHC,SAAL,GAAiBhB,WAAWiB,SAASC,aAAT,CAAuB,MAAvB,CAAX,EAA2C,YAAM;eACvDC,IAAP,CAAY,MAAKC,eAAjB,EAAkCC,OAAlC,CAA0C,UAACC,OAAD,EAAa;kBAC9CC,EAAL,CAAQ,OAAR,EAAiBD,OAAjB;kBACKC,EAAL,CAAQ,OAAR,EAAiBD,OAAjB;SAFJ;KADa,CAAjB;;cAOUd,gBAAV,CAA2B,QAA3B,EAAqC,KAAKgB,OAA1C,EAAmD,EAAEC,SAAS,IAAX,EAAnD;WACOjB,gBAAP,CAAwB,QAAxB,EAAkC,KAAKgB,OAAvC,EAAgD,EAAEC,SAAS,IAAX,EAAhD;SACKD,OAAL;SACKE,QAAL,GAAgB,IAAhB;CAGJ;;AC/BA;;;;;;;AAOA,SAASC,UAAT,CAAoBC,EAApB,EAAoD;QAA5BjB,OAA4B,uEAAlB,EAAEkB,WAAW,CAAb,EAAkB;;QAC5C,CAACD,EAAL,EAAS;cACC,IAAIE,KAAJ,CAAU,iDAAV,CAAN;;;QAGA,OAAOF,EAAP,KAAc,QAAlB,EAA4B;aACnBX,SAASC,aAAT,CAAuBU,EAAvB,CAAL;;;QAGEG,SAASH,GAAGI,qBAAH,EAAf;;;;eAIWC,MAAP,GAAgBtB,QAAQkB,SAAxB,GAAoC,CAApC;;;eAGOK,KAAP,GAAevB,QAAQkB,SAAvB,GAAmC,CAHnC;;;eAMOM,IAAP,GAAcxB,QAAQkB,SAAtB,IAAmCzB,OAAOgC,UAAP,IACnCnB,SAASoB,eAAT,CAAyBC,WADzB,CANA;;;eAUOC,GAAP,GAAa5B,QAAQkB,SAArB,IAAkCzB,OAAOoC,WAAP,IAClCvB,SAASoB,eAAT,CAAyBI,YADzB;;CAKR;;ACnCA;;;;;;;AAOA,SAASC,WAAT,CAAqBd,EAArB,EAAoE;QAA3CjB,OAA2C,uEAAjC,EAAEkB,WAAW,CAAb,EAAgBnB,WAAW,EAA3B,EAAiC;;QAC5D,CAACkB,EAAL,EAAS;cACC,IAAIE,KAAJ,CAAU,iDAAV,CAAN;;;QAGA,OAAOF,EAAP,KAAc,QAAlB,EAA4B;aACnBX,SAASC,aAAT,CAAuBU,EAAvB,CAAL;;QAEA,OAAOjB,OAAP,KAAmB,QAAvB,EAAiC;kBACnB;uBACK,CADL;uBAEKM,SAASC,aAAT,CAAuBP,OAAvB;SAFf;;QAKA,OAAOA,QAAQD,SAAf,KAA6B,QAAjC,EAA2C;gBAC/BA,SAAR,GAAoBO,SAASC,aAAT,CAAuBP,QAAQD,SAA/B,CAApB;;QAEAC,mBAAmBC,WAAvB,EAAoC;kBACtB;uBACK,CADL;uBAEKD;SAFf;;QAKA,CAACA,QAAQD,SAAb,EAAwB;cACd,IAAIoB,KAAJ,CAAU,wCAAV,CAAN;;;QAGEa,gBAAgBhC,QAAQD,SAAR,CAAkBsB,qBAAlB,EAAtB;;;;WAIQY,SAAH,GAAehB,GAAGa,YAAnB,GAAmC9B,QAAQkB,SAA3C,GACAlB,QAAQD,SAAR,CAAkBmC,SADlB;;;WAIIC,UAAH,GAAgBlB,GAAGU,WAApB,GAAmC3B,QAAQkB,SAA3C,GACAlB,QAAQD,SAAR,CAAkBqC,UALlB;;;WAQGD,UAAH,GAAgBnC,QAAQkB,SAAxB,GACAc,cAAcK,KAAd,GAAsBrC,QAAQD,SAAR,CAAkBqC,UATxC;;;WAYGH,SAAH,GAAejC,QAAQkB,SAAvB,GACAc,cAAcM,MAAd,GAAuBtC,QAAQD,SAAR,CAAkBmC;;CAIjD;;ACpDA;;AAEA,SAASK,YAAT,GAAwE;QAAlD9B,eAAkD,uEAAhC,EAAgC;QAA5BT,OAA4B,uEAAlB,EAAEkB,WAAW,CAAb,EAAkB;;QAC9DsB,YAAYC,OAAOjC,IAAP,CAAYC,eAAZ,CAAlB;QACIiC,uBAAJ;;QAEI,CAACF,UAAUG,MAAf,EAAuB;;QAEnB3C,QAAQD,SAAR,KAAsBN,MAA1B,EAAkC;yBACbuB,UAAjB;KADJ,MAEO;yBACce,WAAjB;;;cAGMrB,OAAV,CAAkB,UAACkC,QAAD,EAAc;wBACZA,QAAhB,EAA0BC,KAA1B,CAAgCnC,OAAhC,CAAwC,UAACoC,IAAD,EAAU;gBAC1CJ,eAAeI,KAAKC,IAApB,EAA0B/C,OAA1B,CAAJ,EAAwC;qBAC/BgD,UAAL,GAAkBF,KAAKG,SAAvB;qBACKA,SAAL,GAAiB,IAAjB;aAFJ,MAGO;qBACED,UAAL,GAAkBF,KAAKG,SAAvB;qBACKA,SAAL,GAAiB,KAAjB;;gBAEAH,KAAKG,SAAL,KAAmB,IAAnB,IAA2BH,KAAKE,UAAL,KAAoB,KAAnD,EAA0D;oBAClD,CAACvC,gBAAgBmC,QAAhB,EAA0BM,KAA/B,EAAsC;;uBAE/B1C,IAAP,CAAYC,gBAAgBmC,QAAhB,EAA0BM,KAAtC,EAA6CxC,OAA7C,CAAqD,UAACnB,QAAD,EAAc;wBAC3D,OAAOkB,gBAAgBmC,QAAhB,EAA0BM,KAA1B,CAAgC3D,QAAhC,CAAP,KAAqD,UAAzD,EAAqE;wCACjDqD,QAAhB,EAA0BM,KAA1B,CAAgC3D,QAAhC,EAA0CuD,KAAKC,IAA/C,EAAqD,OAArD;;iBAFR;;gBAMAD,KAAKG,SAAL,KAAmB,KAAnB,IAA4BH,KAAKE,UAAL,KAAoB,IAApD,EAA0D;oBAClD,CAACvC,gBAAgBmC,QAAhB,EAA0BO,KAA/B,EAAsC;;uBAE/B3C,IAAP,CAAYC,gBAAgBmC,QAAhB,EAA0BO,KAAtC,EAA6CzC,OAA7C,CAAqD,UAACnB,QAAD,EAAc;wBAC3D,OAAOkB,gBAAgBmC,QAAhB,EAA0BO,KAA1B,CAAgC5D,QAAhC,CAAP,KAAqD,UAAzD,EAAqE;wCACjDqD,QAAhB,EAA0BO,KAA1B,CAAgC5D,QAAhC,EAA0CuD,KAAKC,IAA/C,EAAqD,OAArD;;iBAFR;;SApBR;KADJ;CA+BJ;;AC9CA;;;;;AAKA,SAASK,eAAT,GAA2B;;;QACnBC,gBAAJ;;QAEI,KAAKrD,OAAL,CAAasD,QAAb,KAA0B,KAA9B,EAAqC;eAC1B;mBAAMC,aAAc,MAAK9C,eAAnB,EAAoC,MAAKT,OAAzC,CAAN;SAAP;;;WAGG,YAAM;qBACIqD,OAAb;;kBAEUG,WAAW,YAAM;yBACT,MAAK/C,eAAnB,EAAoC,MAAKT,OAAzC;SADM,EAEP,MAAKA,OAAL,CAAasD,QAFN,CAAV;KAHJ;CASJ;;ACvBA;;;;;AAKA,SAASG,OAAT,GAAmB;QACX,KAAKpD,SAAL,YAA0Bb,gBAA9B,EAAgD;aACvCa,SAAL,CAAeqD,UAAf;;;SAGC1D,OAAL,CAAaD,SAAb,CAAuB4D,mBAAvB,CAA2C,QAA3C,EAAqD,KAAK9C,OAA1D;WACO8C,mBAAP,CAA2B,QAA3B,EAAqC,KAAK9C,OAA1C;SACKE,QAAL,GAAgB,KAAhB;CAGJ;;ACfA;;;;;;;;AAQA,SAAS6C,GAAT,CAAaC,KAAb,EAAoBjB,QAApB,EAA8BkB,OAA9B,EAAuC;QAC7BC,iBAAiBtB,OAAOjC,IAAP,CAAY,KAAKC,eAAL,CAAqBmC,QAArB,EAA+BM,KAA/B,IAAwC,EAApD,CAAvB;QACMc,iBAAiBvB,OAAOjC,IAAP,CAAY,KAAKC,eAAL,CAAqBmC,QAArB,EAA+BO,KAA/B,IAAwC,EAApD,CAAvB;;QAEI,GAAGc,cAAH,CAAkBC,IAAlB,CAAuB,KAAKzD,eAA5B,EAA6CmC,QAA7C,CAAJ,EAA4D;YACpDkB,OAAJ,EAAa;gBACL,KAAKrD,eAAL,CAAqBmC,QAArB,EAA+BiB,KAA/B,CAAJ,EAA2C;oBACjCM,eAAgB,OAAOL,OAAP,KAAmB,UAApB,GAAkCA,QAAQM,IAA1C,GAAiDN,OAAtE;uBACO,KAAKrD,eAAL,CAAqBmC,QAArB,EAA+BiB,KAA/B,EAAsCM,YAAtC,CAAP;;SAHR,MAKO;mBACI,KAAK1D,eAAL,CAAqBmC,QAArB,EAA+BiB,KAA/B,CAAP;;;;QAIJ,CAACE,eAAepB,MAAhB,IAA0B,CAACqB,eAAerB,MAA9C,EAAsD;eAC3C,KAAKlC,eAAL,CAAqBmC,QAArB,CAAP;;CAIR;;AC5BA;;;;;;;;AAQA,SAAShC,EAAT,CAAYiD,KAAZ,EAAmBjB,QAAnB,EAA6BrD,QAA7B,EAAuC;QAC7B8E,UAAU,CAAC,OAAD,EAAU,OAAV,CAAhB;;QAEI,CAACR,KAAL,EAAY,MAAM,IAAI1C,KAAJ,CAAU,8CAAV,CAAN;QACR,CAACyB,QAAL,EAAe,MAAM,IAAIzB,KAAJ,CAAU,sBAAV,CAAN;QACXkD,QAAQC,OAAR,CAAgBT,KAAhB,IAAyB,CAA7B,EAAgC,MAAM,IAAI1C,KAAJ,CAAa0C,KAAb,6BAAN;;QAE5B,CAAC,GAAGI,cAAH,CAAkBC,IAAlB,CAAuB,KAAKzD,eAA5B,EAA6CmC,QAA7C,CAAL,EAA6D;aACpDnC,eAAL,CAAqBmC,QAArB,IAAiC,EAAjC;;;SAGCnC,eAAL,CAAqBmC,QAArB,EAA+BC,KAA/B,GAAuC,EAAvC;;SAEK,IAAI0B,IAAI,CAAR,EAAWC,QAAQlE,SAASmE,gBAAT,CAA0B7B,QAA1B,CAAxB,EAA6D2B,IAAIC,MAAM7B,MAAvE,EAA+E4B,GAA/E,EAAoF;YAC1EzB,OAAO;uBACE,KADF;wBAEG,KAFH;kBAGH0B,MAAMD,CAAN;SAHV;;aAMK9D,eAAL,CAAqBmC,QAArB,EAA+BC,KAA/B,CAAqC6B,IAArC,CAA0C5B,IAA1C;;;QAGA,OAAOvD,QAAP,KAAoB,UAAxB,EAAoC;YAC5B,CAAC,KAAKkB,eAAL,CAAqBmC,QAArB,EAA+BiB,KAA/B,CAAL,EAA4C;iBACnCpD,eAAL,CAAqBmC,QAArB,EAA+BiB,KAA/B,IAAwC,EAAxC;;;aAGCpD,eAAL,CAAqBmC,QAArB,EAA+BiB,KAA/B,EAAuCtE,SAAS6E,IAAT,IAAiB,WAAxD,IAAwE7E,QAAxE;;CAIR;;AC9BA;;;;;;AAMA,SAASoF,QAAT,GAAgF;QAA9D3E,OAA8D,uEAApD,EAAEkB,WAAW,CAAb,EAAgBoC,UAAU,GAA1B,EAA+BvD,WAAWN,MAA1C,EAAoD;;SACvEO,OAAL,GAAe,EAAf;SACKS,eAAL,GAAuB,EAAvB;;WAEOmE,gBAAP,CAAwB,KAAK5E,OAA7B,EAAsC;mBACvB;0BACO,KADP;wBAEK,KAFL;eAAA,iBAGD;oBACED,kBAAJ;;oBAEI,OAAOC,QAAQD,SAAf,KAA6B,QAAjC,EAA2C;gCAC3BO,SAASC,aAAT,CAAuBP,QAAQD,SAA/B,CAAZ;iBADJ,MAEO,IAAIC,QAAQD,SAAR,YAA6BE,WAAjC,EAA8C;gCACrCD,QAAQD,SAApB;;;uBAGGA,aAAaN,MAApB;aAZG;eAAA,eAcHoF,KAdG,EAcI;wBACC9E,SAAR,GAAoB8E,KAApB;;SAhB0B;kBAmBxB;eAAA,iBACA;oBACE7E,QAAQsD,QAAR,KAAqB,KAAzB,EAAgC;2BACrB,KAAP;;;uBAGGwB,SAAS9E,QAAQsD,QAAjB,EAA2B,EAA3B,KAAkC,GAAzC;aANE;eAAA,eAQFuB,KARE,EAQK;wBACCvB,QAAR,GAAmBuB,KAAnB;;SA5B0B;mBA+BvB;eAAA,iBACD;uBACKC,SAAS9E,QAAQkB,SAAjB,EAA4B,EAA5B,KAAmC,CAA1C;aAFG;eAAA,eAIH2D,KAJG,EAII;wBACC3D,SAAR,GAAoB2D,KAApB;;;KApCZ;;WAyCOE,cAAP,CAAsB,IAAtB,EAA4B,SAA5B,EAAuC;oBACvB,KADuB;sBAErB,KAFqB;kBAGzB,KAHyB;eAI5B,KAAKC,gBAAL,CAAsBd,IAAtB,CAA2B,IAA3B;KAJX;;SAOKpE,MAAL;;;AAGJ2C,OAAOmC,gBAAP,CAAwBD,SAASM,SAAjC,EAA4C;sBACtB;sBACA,KADA;kBAEJ,KAFI;oBAGF,KAHE;eAIP7B;KAL6B;YAOhC;sBACU,KADV;kBAEM,KAFN;oBAGQ,KAHR;eAIGtD;KAX6B;aAa/B;sBACS,KADT;kBAEK,KAFL;oBAGO,KAHP;eAIE2D;KAjB6B;SAmBnC;sBACa,KADb;kBAES,KAFT;oBAGW,KAHX;eAIMG;KAvB6B;QAyBpC;sBACc,KADd;kBAEU,KAFV;oBAGY,KAHZ;eAIOhD;;CA7Bf;;AAiCA+D,SAASO,KAAT,GAAiBlE,UAAjB,CAEA;;"}